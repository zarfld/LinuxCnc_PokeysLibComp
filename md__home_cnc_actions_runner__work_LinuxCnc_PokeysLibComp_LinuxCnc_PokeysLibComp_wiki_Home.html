<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LinuxCNC PoKeysLib-Comp: LinuxCnc_PokeysLibComp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom_doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">LinuxCNC PoKeysLib-Comp
   </div>
   <div id="projectbrief">unofficial PoKeys HAL-Component for LinuxCNC</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md__home_cnc_actions_runner__work_LinuxCnc_PokeysLibComp_LinuxCnc_PokeysLibComp_wiki_Home.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">LinuxCnc_PokeysLibComp </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md740"></a>
Overview</h1>
<p >The LinuxCnc_PokeysLibComp project integrates PoKeys devices with LinuxCNC, providing control and monitoring capabilities. This repository contains the necessary components, scripts, and documentation to set up and use PoKeys devices with LinuxCNC.</p>
<h1><a class="anchor" id="autotoc_md741"></a>
Directory Structure</h1>
<p >The repository is organized into the following directories:</p>
<ul>
<li><code>pokeys_uspace/</code>: Contains Source of pokeys userspace component for interfacing with PoKeys devices.</li>
<li><code>pokeys_py/</code>: prepared for Contains Python scripts for interfacing with PoKeys devices.</li>
<li><code>pokeys_rt/</code>: Contains Source of pokeys_homecomp real-time component for PoKeys devices.</li>
<li><code>tests/</code>: Contains unit tests, integration tests, and other testing-related files.</li>
<li><code>docs/</code>: Contains project-related documentation.</li>
<li><code>scripts/</code>: Contains scripts for setup, configuration, and auxiliary tasks.</li>
</ul>
<h1><a class="anchor" id="autotoc_md742"></a>
Installation</h1>
<p >To install the LinuxCnc_PokeysLibComp project, follow these steps:</p>
<div class="fragment"><div class="line">git clone https://github.com/zarfld/LinuxCnc_PokeysLibComp.git</div>
<div class="line">cd LinuxCnc_PokeysLibComp</div>
<div class="line">sudo sh install.sh</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md743"></a>
Hardware Requirements</h1>
<p >The project has been tested with the following hardware:</p>
<ul>
<li>RaspberryPi4 (for LinuxCNC)</li>
<li>PoKeys57E</li>
<li>PoExtBusOC16CNC for Axes-Stepper Enable/Pulse/Dir</li>
<li>CNC keyboard – PoNETkbd48CNC</li>
<li>PoRelay8 – Relay extension board</li>
<li>PoExtBusOC16</li>
<li>PoKeys57CNC</li>
<li>PoStep25-32 (v1.3)</li>
</ul>
<h1><a class="anchor" id="autotoc_md744"></a>
Library Status</h1>
<p >The following features have been implemented and tested:</p>
<ul>
<li>[e] Connecting to USB devices</li>
<li>[x] Connecting to network devices</li>
<li>[x] Reading device data</li>
<li>[x] Reading digital inputs</li>
<li>[x] Writing digital outputs</li>
<li>[x] Reading analog inputs</li>
<li>[x] PoExtBus writing</li>
<li>[x] PoExtBus reading</li>
<li>[ ] LCD operations</li>
<li>[ ] Matrix LED</li>
<li>[x] Setting pin functions</li>
<li>[x] Reading pin functions</li>
<li>[ ] Setting pin key codes</li>
<li>[ ] Reading pin key codes</li>
<li>[X] PWM operations</li>
<li>[x] Pulse engine operations</li>
<li>[i] Matrix keyboard setup</li>
<li>[i] Matrix keyboard reading</li>
<li>[x] kbd48CNC set LED</li>
<li>[x] kbd48CNC get Button Status</li>
<li>[x] Using encoders</li>
<li>[ ] I2C operations</li>
<li>[ ] SPI operation</li>
<li>[ ] PoIL operations</li>
<li>[i] 1-wire operations</li>
</ul>
<p >x ... available i ... implemented but not tested ! ... implemented but not working yet p ... planned e ... known issue</p>
<h2><a class="anchor" id="autotoc_md745"></a>
PoRelay8:</h2>
<ul>
<li>[x] needs to be connected in Parallel to kbd48CNC with white PoExt Cable OR using Canbus (connecting it using the Red PoExtBus cable to the i2C extender which is delivered with kbd48CNC will not work)</li>
<li>[x] if it is used together with "non smart" PoExtBus devices (e.g. PoExtBusOC16) use "PoExtBus - Smart" page on Pokeys-SW to set "Sequence ID"</li>
<li>[ ] inputs not available (yet?)</li>
</ul>
<h2><a class="anchor" id="autotoc_md746"></a>
PoExtBusOC16</h2>
<ul>
<li>[x] can be set using pokeys.0.PoExtBus.#.Out-0..7 (all 16outs can be used pokeys.0.PoExtBus.0 and pokeys.0.PoExtBus.1)</li>
<li>[ ] inputs not available</li>
</ul>
<h2><a class="anchor" id="autotoc_md747"></a>
PoExtBusOC16CNC</h2>
<ul>
<li>see "PulseEnginev2"</li>
</ul>
<h2><a class="anchor" id="autotoc_md748"></a>
kbd48CNC:</h2>
<ul>
<li>[x] using as PoNet-extension buard attached to Pokeys57E</li>
<li>[x] using CanBus (6Pin MicroMatch Connector) directly on Pokeys57CNC</li>
</ul>
<h2><a class="anchor" id="autotoc_md749"></a>
Pokeys57E</h2>
<ul>
<li>[x] connected using Ethernet</li>
<li>[x] Read&amp;Set of Digital IO on HalPins pokeys.0.Pins.*.DigitalValueGet / DigitalValueSet</li>
<li>[x] Readt of AnalogValue IO on HalPins pokeys.0.Pins.*.AnalogValue on the pins that support that</li>
<li>periphals listed above was tested on this device.</li>
</ul>
<p >changing structure of IOs to "Canonical Device Interface" in work</p>
<h2><a class="anchor" id="autotoc_md750"></a>
Pokeys57CNC</h2>
<ul>
<li>[x] connected using USB</li>
<li>[x] connected using Ethernet</li>
<li>[x] LinuxCNC example config in Work (using the pinsetup as available on PCB)</li>
<li>[x] Switchng OC Outputs pokeys.0.PEv2.ExternalOCOutput.0..3</li>
<li>[x] Switchng Relay Outputs (SSR1 &amp; 2 -&gt; pokeys.0.PEv2.ExternalRelayOutput.0 &amp; 1) (SSR1 &amp; 2 -&gt; pokeys.0.PEv2.ExternalRelayOutput.0 &amp; 1)</li>
<li>using USB connection seems "faster" than using ethernet - may depend on networksetup (networkswitch vs. direct connection)</li>
</ul>
<h2><a class="anchor" id="autotoc_md751"></a>
Pokeys57E</h2>
<ul>
<li>[ ] connected using USB (currently could not connect on newer distributions see issue #231 )</li>
</ul>
<h2><a class="anchor" id="autotoc_md752"></a>
PulseEnginev2</h2>
<ul>
<li>[x] Setting Status Running/Stop depending on LinuxCNC state ("machine-on")</li>
<li>[x] Reading Status of Limit+/- and Home switches</li>
<li>[x] setting External OC and RelayOutputs - in case that "Extended IO" is available and activated (Pokeys57CNC)</li>
<li>[x] setting PinConfiguration for Limits, Home, Probe &amp; Emergency switches based in LinuxCNC-INI configuration - not reliable</li>
<li>[x] parametrizing MaxSpeed, MaxAccelleration, ... based on LinuxCNC configuarion (mm/sec to pulses/sec conversion is being done using JOINT.*.STEPSCALE) </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
